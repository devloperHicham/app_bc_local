<div class="search-results">
  <div class="header">
    <div class="ctasecondary">
      <div class="icon">
        <img class="vector-icon" alt="" src="assets/images/arrow-right-blue.png" />
      </div>
      <a routerLink="/home" class="back">{{ 'SEARCH_COMPARISON.BACK' | translate }}</a>
    </div>
    <div class="book-a-container">{{ 'SEARCH_COMPARISON.BOOK_CONTAINER' | translate }}</div>
  </div>
  <div class="content">
    <div class="left-column">
      <div class="search-bardesktop">
        <div class="content1">
          <div class="tabs">
            <div class="tab-item">
              <div class="icon">
                <img class="vector-icon1" alt="" src="assets/images/ship-white.png" />
              </div>
              <div class="for-brokers">{{ 'SEARCH_COMPARISON.MARINE' | translate }}</div>
            </div>
          </div>
          <div class="content2">
            <div class="input-field">
              <div class="header1">
                <div class="input-title">
                  <div class="text-placeholder-1">{{ 'SEARCH_COMPARISON.FROM' | translate }}</div>
                </div>
              </div>
              <div class="text-field">
                <div class="icon">
                  <img class="vector-icon4" alt="" src="assets/images/location-blue.png" />
                </div>
                <input
                  style="border: none"
                  type="text"
                  placeholder="Casablanca, MA"
                  class="casablanca-portma"
                  [value]="formData?.selectedPortFromComparison"
                  disabled
                />
              </div>
            </div>

            <div class="input-field">
              <div class="header1">
                <div class="input-title">
                  <div class="text-placeholder-1">{{ 'SEARCH_COMPARISON.TO' | translate }}</div>
                </div>
              </div>
              <div class="text-field">
                <div class="icon">
                  <img class="vector-icon4" alt="" src="assets/images/location-blue.png" />
                </div>
                <input
                  style="border: none"
                  type="text"
                  placeholder="Casablanca, MA"
                  class="casablanca-portma"
                  [value]="formData?.selectedPortToComparison"
                  disabled
                />
              </div>
            </div>

            <div class="date-field">
              <div class="header3">
                <div class="input-title2">
                  <div class="text-placeholder-1">{{ 'SEARCH_COMPARISON.SPECIFIC_DAY' | translate }}</div>
                  <div class="checkbox">
                    <input type="checkbox" class="checkbox-child" [(ngModel)]="isIntervalMode" (change)="onCheckboxChange()" />
                  </div>
                  <div class="text-placeholder-1">{{ 'SEARCH_COMPARISON.INTERVAL' | translate }}</div>
                </div>
              </div>
              <div class="text-field2">
                <div class="icon">
                  <img class="vector-icon10" alt="" src="assets/images/date-blue.png" />
                </div>
                <input
                  #intervalDateInput
                  type="text"
                  class="eg-casablanca-portma"
                  style="border: none"
                  placeholder="{{ 'SEARCH_COMPARISON.INTERVAL' | translate }}"
                  readonly
                  *ngIf="isIntervalMode"
                />
                <input
                  #singleDateInput
                  type="text"
                  class="eg-casablanca-portma"
                  style="border: none"
                  placeholder="{{ 'SEARCH_COMPARISON.SPECIFIC_DAY' | translate }}"
                  readonly
                  *ngIf="!isIntervalMode"
                />
              </div>
            </div>

            <div class="shipping-typemarine">
              <div class="mono-select-field">
                <div class="header3">
                  <div class="input-title">
                    <div class="showing-129429-results">{{ 'SEARCH_COMPARISON.SHIPPING_TYPE' | translate }}</div>
                  </div>
                </div>
                <div class="text-field2">
                  <select [value]="formData?.selectedTransportation" style="border: none; background-color: transparent"
                    class="eg-casablanca-portma">
                    <option value="" disabled selected> {{ "FORM.SHIPPING_TYPE" | translate }}</option>
                    <option *ngFor="let transportation of transportations" [value]="transportation.ID">
                      {{ transportation.TRANSPORTATIONNAME }}
                    </option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="filters">
        <div class="filters-parent">
          <div class="filters1">{{ 'SEARCH_COMPARISON.FILTERS' | translate }}</div>
          <a class="clear-all">{{ 'SEARCH_COMPARISON.CLEAR_ALL' | translate }}</a>
        </div>
        <div class="content3">
          <div class="mono-select-field1">
            <div class="header3">
              <div class="input-title">
                <div class="showing-129429-results">{{ 'SEARCH_COMPARISON.CARRIER' | translate }}</div>
              </div>
            </div>
            <div class="text-field2">
                <select [value]="formData?.selectedCompany" formControlName="selectedCompany" style="border: none; background-color: transparent"
                  class="eg-casablanca-portma">
                  <option value="" disabled selected> {{ 'PLACEHOLDERS.ALL_SEALINES' | translate }}</option>
                  <option *ngFor="let company of companies" [value]="company.ID">
                    {{ company.COMPANYNAME }}
                  </option>
                </select>
            </div>
          </div>

          <div class="price-range">
            <div class="header8">
              <div class="input-title">
                <div class="showing-129429-results">{{ 'SEARCH_COMPARISON.PRICE_RANGE' | translate }}</div>
              </div>
            </div>
            <div class="min-max">
              <input style="width: 50px" type="text" placeholder="$ 1000" class="min" />
              <input style="width: 50px" type="text" placeholder="$ 2345" class="min" />
            </div>
            <div class="sliders-wrapper">
              <input type="range" class="sliders" />
            </div>
          </div>

          <div class="price-range">
            <div class="header8">
              <div class="input-title">
                <div class="showing-129429-results">{{ 'SEARCH_COMPARISON.TRANSIT_TIME' | translate }}</div>
              </div>
            </div>
            <div class="min-max1">
              <input style="width: 50px" type="text" placeholder="1 day(s)" class="min" />
              <input style="width: 50px" type="text" placeholder="3 day(s)" class="min" />
            </div>
            <div class="sliders-wrapper">
              <input type="range" class="sliders" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="right-column">
      <div class="topbar">
        <div class="filters2">
          <div class="quick-filters">
            <input class="checkbox1" type="checkbox" />
            <div class="sort-by-fastest">{{ 'SEARCH_COMPARISON.SORT_FASTEST' | translate }}</div>
          </div>
          <div class="quick-filters">
            <input class="checkbox1" type="checkbox" />
            <div class="sort-by-fastest">{{ 'SEARCH_COMPARISON.SORT_CHEAPEST' | translate }}</div>
          </div>
        </div>
        <div class="stay-updated">
          <div class="icon">
            <img class="vector-icon10" alt="" src="assets/images/bell-orange.png" />
          </div>
          <div class="stay-updated1">{{ 'SEARCH_COMPARISON.STAY_UPDATED' | translate }}</div>
        </div>
      </div>
      <!-- Trip card example -->
      @if(comparisons){
      <div class="trips" *ngFor="let comp of comparisons; trackBy: trackById">
        <div class="trip-card">
          <div class="top-bar">
            <div class="trip-category">
              <div class="icon">
                <img class="vector-icon1" alt="" src="assets/images/ship-blue.png" />
              </div>
              <div class="marine-shipping">{{ 'SEARCH_COMPARISON.MARINE_SHIPPING' | translate }}</div>
            </div>
            <div class="quick-actions" >
              <div class="icon"  (click)="togglePast(comp.id)">
                <img class="vector-icon1" alt="" src="assets/images/past-blue.png" />
              </div>
              <div class="icon"  (click)="toggleFavorite(comp.id)">
                <img class="vector-icon18" alt="" src="assets/images/heart-blue.png" />
              </div>
            </div>
          </div>
          <!-- Loading Spinner -->
          <div *ngIf="isLoading" class="ship-spinner-container">
            <img src="assets/images/ship-spinner.png" alt="Loading..." class="ship-spinner" />
          </div>
          <div class="content4">
            <div class="header10">
              <div class="quick-actions">
                <img class="shipping-partner-icon" alt="" src="assets/flag_companies/{{ comp.companyLogo }}" />
                <div class="marine-shipping">{{ 'SEARCH_COMPARISON.ID' | translate }} {{comp.codeTransation}}</div>
              </div>
              <div class="shipping-info">
                <div class="info">
                  <div class="icon">
                    <img class="vector-icon1" alt="" src="assets/images/time-blue.png" />
                  </div>
                  <div class="marine-shipping"> {{ calculateDaysBetween(comp.dateDepart, comp.dateArrive) }}</div>
                </div>
                <div class="info">
                  <div class="icon">
                    <img class="vector-icon20" alt="" src="assets/images/container-blue.png" />
                  </div>
                  <div class="marine-shipping">{{ comp.transportationName }}</div>
                </div>
              </div>
            </div>

            <div class="content5">
              <div class="departure">
                <div class="quick-filters">
                  <div class="flags">
                    <img class="vector-icon22" alt="" src="assets/flag_countries/{{comp.portFromLogo}}" />
                  </div>
                  <div class="casablanca-port-ma">{{comp.portFromName}}, {{comp.countryFromNameAbbreviation}}</div>
                </div>
                <div class="div42">{{comp.dateDepart}}</div>
              </div>
              <div class="road">
                <div class="marine-shipping">{{ 'SEARCH_COMPARISON.TRANSIT' | translate }}</div>
                <div class="ellipse-parent">
                  <div class="ellipse"></div>
                  <div class="frame-child"></div>
                  <div class="ellipse1"></div>
                  <div class="frame-child"></div>
                  <div class="ellipse"></div>
                </div>
              </div>
              <div class="arrival">
                <div class="quick-filters">
                  <div class="flags1">
                    <img class="vector-icon23" alt="" src="assets/flag_countries/{{comp.portToLogo}}" />
                  </div>
                  <div class="casablanca-port-ma">{{comp.portToName}}, {{comp.countryToNameAbbreviation}}</div>
                </div>
                <div class="div42">{{comp.dateArrive}}</div>
              </div>
            </div>

            <div class="separator"></div>

            <div class="footer">
              <div class="quick-actions">
                <div class="ctasecondary1">
                  <div class="back">{{ 'SEARCH_COMPARISON.CHAT' | translate }}</div>
                </div>
                <button style="cursor: pointer" class="ctasecondary2" (click)="openModal(comp)">
                  {{ 'SEARCH_COMPARISON.VIEW_DETAILS' | translate }}
                </button>
              </div>
              <div class="pricing">
                <div class="casablanca-port-ma">${{comp.price}}</div>
                <div class="ctaprimary">
                  <a style="color: white; text-decoration: none; cursor: pointer" (click)="bookNow(comp)" routerLinkActive="active" class="back">
                    {{ 'SEARCH_COMPARISON.BOOK_NOW' | translate }}
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
     }@else {
        <div class="separator">no data Found</div>
      }

      <div class="pagination">
        <div class="actions4">
          <div class="ctasecondary9" 
            (click)="previousPage()"
            (keyup)="onKeyMenuItem($event)">
            <div class="back">{{ 'SEARCH_COMPARISON.PREVIOUS' | translate }}</div>
          </div>
          <div class="pages">
            <div
              *ngFor="let page of totalPages"
              (click)="loadPage(page)"
              (keyup)="onKeyMenuItem($event)"
            >
              <div class="page" [class.active]="currentPage === page">
                {{ page }}
              </div>
            </div>
          </div>
          <div class="ctasecondary10" 
            (click)="nextPage()"
            (keyup)="onKeyMenuItem($event)">
            <div class="back">{{ 'SEARCH_COMPARISON.NEXT' | translate }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<app-search-comp-detail [comparisons]="selectedCompareison!" *ngIf="isModalOpen" (closeEvent)="closeModal()"></app-search-comp-detail>

<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "line-spin-fade" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>